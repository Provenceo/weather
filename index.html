<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>父页面</title>
</head>
<body>
    <button>按钮</button>
    <button>按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
    <button>按钮4</button>
    <!-- script标签的位置 -->
    <script>
        // 1. 获取按钮
        // var btn = document.querySelector('button');
        let newWindow = null;
        // 2. 给每个按钮绑定点击事件
        document.querySelectorAll('button').forEach(item => {
            item.onclick = function () {
                let text = this.innerText;
                let cast = new BroadcastChannel('channel');
                cast.postMessage(text);
                // 第一次打开子页面，第二次不打开直接使用cast发送数据
                if(!newWindow) newWindow = window.open('info.html?name='+text, '_blank');
            }
        })
    </script>
</body>
</html>
